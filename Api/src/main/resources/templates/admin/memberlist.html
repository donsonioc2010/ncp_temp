<!DOCTYPE html>
<html
        lang="ko"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layout/layout}"
>
<main layout:fragment="content">
    <div class="container">
        <link rel="stylesheet" type="text/css" href="/static/css/adminlist.css">
        <div class="row">
            <div class="col">
                <div class="admin-title-row">
                    <h1>관리자 계정 대쉬보드</h1>
                    <input type="button" value="계정 생성" class="btn btn-primary" style="height: 50%;"
                           onClick="moveForm();"
                           th:if="${session.loginUser.userRole.name().equals('ADMIN')}"/>


                </div>
            </div>
        </div>

        <table  class="table">
            <thead>
            <tr>
                <th>ID 번호</th>
                <th>이메일</th>
                <th>최근 로그인 시간</th>
                <th>최근 수정 시간</th>
                <th>별명</th>
                <th>회원 상태</th>
                <th th:if="${user != null && #strings.equals(user.userRole,'USER')}">계정 정지 버튼</th>

            </tr>
            </thead>
            <tbody class="table-group-divider">
            <tr th:each="user : ${users}" th:if="${#strings.equals(user.userStatus,'ACTIVATE')}" >
                <td th:text="${user.id}"></td>
                <td th:text="${user.email}"></td>
                <td th:text="${user.loginAt}"></td>
                <td th:text="${user.updatedAt}"></td>
                <td th:text="${user.nickName}"></td>
                <td th:text="${user.userStatus}"></td>
                <td>
                    <form th:action="@{'/admin/suspend/' + ${user.id}}" method="post" >
                        <button type="submit" class="btn btn-danger"  th:if="${user != null && #strings.equals(user.userRole,'USER')}">계정 정지 버튼</button>
                    </form>
                </td>
            </tr>

            </tbody>
        </table>
    </div>
</main>
<th:block layout:fragment="script">
    <script type="application/javascript" th:inline="javascript">
        function moveForm() {
            location.href = window.location.origin + "/admin/form"
        }
    </script>
    <script type="text/javascript">
    </script>
</th:block>







</html>