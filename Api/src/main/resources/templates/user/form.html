<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>회원가입</title>
</head>
<body>

<h2>회원가입</h2>

<form action="#" th:action="@{/api/user/signup}" method="post" id="signupForm">
  <div>
    <label for="email">이메일:</label>
    <input type="email" id="email" name="email" required>
  </div>
  <div>
    <label for="password">비밀번호:</label>
    <input type="password" id="password" name="password" required>
  </div>
  <div>
    <label for="nickName">별명:</label>
    <input type="text" id="nickName" name="nickName" required>
  </div>
  <button type="submit">회원가입</button>
</form>

<script th:inline="javascript">
  document.getElementById('signupForm').addEventListener('submit', function(event) {
      event.preventDefault();
      const formData = {
          email: document.getElementById('email').value,
          password: document.getElementById('password').value,
          nickName: document.getElementById('nickName').value,
      };

      fetch(/*[[ @{/api/users/signup} ]]*/, {
          method: 'POST',
          headers: {
              'Content-Type': 'application/json',
          },
          body: JSON.stringify(formData),
      }).then(response => {
          if(response.ok) {
              alert('회원가입 성공!');
          } else {
              alert('회원가입 실패!');
          }
      });
  });
</script>

</body>
</html>
